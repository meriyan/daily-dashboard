<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Meri's Daily Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    .tabs {
      display: flex;
      justify-content: center;
      background-color: #007bff;
      flex-wrap: wrap;
    }
    .tab {
      padding: 15px 20px;
      color: white;
      cursor: pointer;
    }
    .tab.active {
      background-color: #0056b3;
    }
    .content {
      padding: 30px;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      text-align: center;
    }
    #currentDate {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
    }
    .todo-container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    input[type="text"], input[type="time"], input[type="date"], input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      padding: 10px 15px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 5px;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
      margin-top: 15px;
    }
    li {
      background: #eee;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .task-group {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-grow: 1;
    }
    .completed .task-text {
      text-decoration: line-through;
      color: gray;
    }
    .task-text {
      font-size: 16px;
    }
    .remove-btn {
      background: red;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
    }
    .hidden {
      display: none;
    }
    .log-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    summary {
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBnXWDkKRsbjvdgMlSrbgJvssu9N-LUDuA",
      authDomain: "dailydashboard-64139.firebaseapp.com",
      databaseURL: "https://dailydashboard-64139-default-rtdb.firebaseio.com",
      projectId: "dailydashboard-64139",
      storageBucket: "dailydashboard-64139.firebasestorage.app",
      messagingSenderId: "420557412452",
      appId: "1:420557412452:web:8ee806a83543b2b1776771"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>
</head>
<body>
  <div class="tabs">
    <div class="tab active" onclick="switchTab('todo')">‚úÖ To-Do List</div>
    <div class="tab" onclick="switchTab('timelog')">‚è±Ô∏è Time Log</div>
    <div class="tab" onclick="switchTab('social')">üì± Social Tracker</div>
    <div class="tab" onclick="switchTab('hair')">üíá Hair Tracker</div>
    <div class="tab" onclick="switchTab('sleep')">üí§ Sleep Tracker</div>
  </div>
  <div class="content">
    <div id="currentDate"></div>
    <div id="todo" class="todo-container">
      <h1>To-Do List</h1>
      <input type="text" id="taskInput" placeholder="Write your task..." />
      <button onclick="addTask()">Add</button>
      <div id="dailyTaskSections"></div>
    </div>
  </div>
  <script>
    const taskInput = document.getElementById("taskInput");
    const dateKey = new Date().toISOString().split("T")[0];
    document.getElementById("currentDate").textContent = "üìÖ " + new Date().toLocaleDateString();

    async function getStoredTasks() {
      const snapshot = await db.ref("tasks").get();
      return snapshot.exists() ? snapshot.val() : {};
    }

    function storeTasks(tasks) {
      db.ref("tasks").set(tasks);
    }

    async function addTask(text = "", done = false, date = dateKey) {
      const tasks = await getStoredTasks();
      tasks[date] = tasks[date] || [];
      const taskText = text || taskInput.value.trim();
      if (!taskText) return;
      tasks[date].push({ text: taskText, done });
      storeTasks(tasks);
      taskInput.value = "";
      renderTasks(tasks);
    }

    async function toggleDone(date, index) {
      const tasks = await getStoredTasks();
      tasks[date][index].done = !tasks[date][index].done;
      storeTasks(tasks);
      renderTasks(tasks);
    }

    async function deleteTask(date, index) {
      const tasks = await getStoredTasks();
      tasks[date].splice(index, 1);
      storeTasks(tasks);
      renderTasks(tasks);
    }

    function renderTasks(tasksData = null) {
      const container = document.getElementById("dailyTaskSections");
      container.innerHTML = "";
      const tasks = tasksData || {};
      Object.keys(tasks).sort((a,b) => b.localeCompare(a)).forEach(date => {
        const details = document.createElement("details");
        if (date === dateKey) details.setAttribute("open", true);
        const summary = document.createElement("summary");
        summary.textContent = `Tasks for ${new Date(date).toLocaleDateString()}`;
        const ul = document.createElement("ul");
        tasks[date].forEach((task, i) => {
          const li = document.createElement("li");
          if (task.done) li.classList.add("completed");
          const group = document.createElement("div");
          group.className = "task-group";
          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = task.done;
          checkbox.onchange = () => toggleDone(date, i);
          const span = document.createElement("span");
          span.className = "task-text";
          span.textContent = task.text;
          const del = document.createElement("button");
          del.textContent = "üóëÔ∏è";
          del.className = "remove-btn";
          del.onclick = () => deleteTask(date, i);
          group.appendChild(checkbox);
          group.appendChild(span);
          li.appendChild(group);
          li.appendChild(del);
          ul.appendChild(li);
        });
        details.appendChild(summary);
        details.appendChild(ul);
        container.appendChild(details);
      });
    }

    window.onload = async () => {
      const tasks = await getStoredTasks();
      renderTasks(tasks);
    };
  </script>
</body>
</html>